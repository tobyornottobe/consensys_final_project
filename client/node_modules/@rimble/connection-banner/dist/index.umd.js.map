{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport RimbleUtils from '@rimble/utils';\nimport { Box, Flex, Icon, Text, MetaMaskButton, Flash } from 'rimble-ui';\n\nconst WrongNetwork = ({\n  currentNetwork,\n  requiredNetwork,\n  onWrongNetworkMessage,\n}) => {\n  return (\n    <div>\n      {onWrongNetworkMessage === null ? (\n        // Show default banner\n        <Flash variant={'danger'}>\n          <Flex alignItems=\"center\">\n            <Box pr={3}>\n              <Icon name=\"Warning\" size=\"44\" />\n            </Box>\n            <Flex flexDirection=\"column\">\n              <Text fontWeight=\"bold\" color={'inherit'}>\n                Switch to the{' '}\n                {RimbleUtils.getEthNetworkNameById(requiredNetwork)} network in{' '}\n                <Text\n                  color={'inherit'}\n                  fontWeight={'inherit'}\n                  display={['none', 'none', 'inline-block', 'inline-block']}\n                >\n                  MetaMask\n                </Text>\n                <Text\n                  color={'inherit'}\n                  fontWeight={'inherit'}\n                  display={['inline-block', 'inline-block', 'none', 'none']}\n                >\n                  Settings\n                </Text>\n              </Text>\n              <Text color={'inherit'}>\n                To use our blockchain features, you need to be on the{' '}\n                {RimbleUtils.getEthNetworkNameById(requiredNetwork)} network.\n                You're currently on{' '}\n                {RimbleUtils.getEthNetworkNameById(currentNetwork)}.\n              </Text>\n            </Flex>\n          </Flex>\n        </Flash>\n      ) : (\n        // Show custom banner\n        onWrongNetworkMessage\n      )}\n    </div>\n  );\n};\n\nconst NoNetwork = ({ noNetworkAvailableMessage }) => {\n  return (\n    <div>\n      {noNetworkAvailableMessage === null ? (\n        <Flash variant={'danger'}>\n          <Flex alignItems=\"center\" justifyContent=\"space-between\">\n            <Flex alignItems=\"center\" pr={'2'}>\n              <Box pr={3}>\n                <Icon name=\"Warning\" size=\"44\" />\n              </Box>\n              <Flex flexDirection=\"column\">\n                <Text fontWeight=\"bold\" color={'inherit'}>\n                  Install the MetaMask browser extension to use our blockchain\n                  features in your current browser\n                </Text>\n              </Flex>\n            </Flex>\n\n            <MetaMaskButton as=\"a\" href=\"https://metamask.io/\" target=\"_blank\">\n              Install MetaMask\n            </MetaMaskButton>\n          </Flex>\n        </Flash>\n      ) : (\n        noNetworkAvailableMessage\n      )}\n    </div>\n  );\n};\n\nconst NotWeb3Browser = ({ notWeb3CapableBrowserMessage }) => {\n  return (\n    <div>\n      {notWeb3CapableBrowserMessage === null ? (\n        <Flash variant={'danger'}>\n          <Flex alignItems=\"center\">\n            <Box pr={3}>\n              <Icon name=\"Warning\" size=\"44\" />\n            </Box>\n            <Flex flexDirection=\"column\">\n              <Text fontWeight=\"bold\" color={'inherit'}>\n                Your browser doesn't support our blockchain features\n              </Text>\n              {RimbleUtils.isMobileDevice() ? (\n                <Text color={'inherit'}>\n                  Try a mobile wallet browser like Status, Coinbase wallet or\n                  Cipher\n                </Text>\n              ) : (\n                <Text color={'inherit'}>\n                  Switch to either Brave, FireFox, Opera, or Chrome to continue\n                </Text>\n              )}\n            </Flex>\n          </Flex>\n        </Flash>\n      ) : (\n        notWeb3CapableBrowserMessage\n      )}\n    </div>\n  );\n};\n\nclass ConnectionBanner extends Component {\n  static propTypes = {\n    currentNetwork: PropTypes.number,\n    requiredNetwork: PropTypes.number,\n    onWeb3Fallback: PropTypes.bool,\n    children: PropTypes.shape({\n      notWeb3CapableBrowserMessage: PropTypes.node,\n      noNetworkAvailableMessage: PropTypes.node,\n      onWrongNetworkMessage: PropTypes.node,\n    }),\n  };\n  static defaultProps = {\n    currentNetwork: null,\n    requiredNetwork: null,\n    onWeb3Fallback: false,\n    children: {\n      notWeb3CapableBrowserMessage: null,\n      noNetworkAvailableMessage: null,\n      onWrongNetworkMessage: null,\n    },\n  };\n\n  state = {\n    isCorrectNetwork: null,\n  };\n\n  checkCorrectNetwork = () => {\n    const isCorrectNetwork =\n      this.props.currentNetwork === this.props.requiredNetwork;\n    if (isCorrectNetwork !== this.state.isCorrectNetwork) {\n      this.setState({ isCorrectNetwork });\n    }\n  };\n\n  componentDidMount() {\n    const browserIsWeb3Capable = RimbleUtils.browserIsWeb3Capable();\n    this.setState({ browserIsWeb3Capable });\n  }\n\n  componentDidUpdate() {\n    if (this.props.currentNetwork && this.props.requiredNetwork) {\n      this.checkCorrectNetwork();\n    }\n  }\n\n  render() {\n    const { currentNetwork, requiredNetwork, onWeb3Fallback } = this.props;\n\n    const {\n      notWeb3CapableBrowserMessage,\n      noNetworkAvailableMessage,\n      onWrongNetworkMessage,\n    } = this.props.children;\n\n    return (\n      <div>\n        {this.state.browserIsWeb3Capable === false ? (\n          <NotWeb3Browser\n            notWeb3CapableBrowserMessage={notWeb3CapableBrowserMessage}\n          />\n        ) : onWeb3Fallback === true || currentNetwork === null ? (\n          <NoNetwork noNetworkAvailableMessage={noNetworkAvailableMessage} />\n        ) : this.state.isCorrectNetwork === false ? (\n          <WrongNetwork\n            currentNetwork={currentNetwork}\n            requiredNetwork={requiredNetwork}\n            onWrongNetworkMessage={onWrongNetworkMessage}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default ConnectionBanner;\n"],"names":["WrongNetwork","currentNetwork","requiredNetwork","onWrongNetworkMessage","React","Flash","Flex","Box","Icon","Text","RimbleUtils","getEthNetworkNameById","NoNetwork","noNetworkAvailableMessage","MetaMaskButton","NotWeb3Browser","notWeb3CapableBrowserMessage","isMobileDevice","ConnectionBanner","state","isCorrectNetwork","checkCorrectNetwork","props","setState","browserIsWeb3Capable","onWeb3Fallback","children","Component","propTypes","PropTypes","number","bool","shape","node","defaultProps"],"mappings":"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"}